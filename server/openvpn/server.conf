# Konektika VPN Server Configuration
# OpenVPN 2.6.x compatible

# Server mode and protocol
port 1194
proto udp
dev tun

# SSL/TLS root certificate, server certificate, and server key
ca /home/mosatinc/mosatinc/konektika/server/openvpn/keys/ca.crt
cert /home/mosatinc/mosatinc/konektika/server/openvpn/keys/server.crt
key /home/mosatinc/mosatinc/konektika/server/openvpn/keys/server.key
dh /home/mosatinc/mosatinc/konektika/server/openvpn/keys/dh2048.pem

# Network configuration
server 10.8.0.0 255.255.255.0
ifconfig-pool-persist /home/mosatinc/mosatinc/konektika/server/openvpn/logs/ipp.txt

# Push routes to clients
push "redirect-gateway def1 bypass-dhcp"
push "dhcp-option DNS 8.8.8.8"
push "dhcp-option DNS 8.8.4.4"

# Client-to-client communication
client-to-client

# Keepalive settings
keepalive 10 120

# TLS authentication (extra security layer)
tls-auth /home/mosatinc/mosatinc/konektika/server/openvpn/keys/ta.key 0

# Cipher and authentication
cipher AES-256-GCM
auth SHA256

# Compression
compress lz4-v2
push "compress lz4-v2"

# Maximum clients
max-clients 100

# User and group (run as unprivileged user after initialization)
user nobody
group nogroup

# Persist options
persist-key
persist-tun

# Logging
status /home/mosatinc/mosatinc/konektika/server/openvpn/logs/openvpn-status.log
log-append /home/mosatinc/mosatinc/konektika/server/openvpn/logs/openvpn.log
verb 3
mute 20

# Client configuration directory (for per-client configs)
client-config-dir /home/mosatinc/mosatinc/konektika/server/openvpn/ccd

# Explicit exit notify
explicit-exit-notify 1
